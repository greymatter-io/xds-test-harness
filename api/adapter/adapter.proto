syntax = "proto3";

option go_package = "github.com/zachmandeville/tester-prototype/adapter/adapter";

package adapter;

message Endpoints {
  message Endpoint {
    string name = 1;
  }
  repeated Endpoint items = 1;
}

message Clusters {
  message Cluster {
    string name = 1;
    map<string,string> connect_timeout = 2;
  }
  repeated Cluster items = 1;
}

message Routes {
  message Route {
    string name = 1;
  }
  repeated Route items = 1;
}

message Listeners {
  message Listener {
    string name = 1;
  }
  repeated Listener items = 1;
}

message Runtimes {
  message Runtime {
    string name = 1;
  }
  repeated Runtime items = 1;
}

message Secrets {
  message Secret {
    string name = 1;
  }
  repeated Secret items = 1;
}

message Snapshot {
  string version = 1;
  Endpoints endpoints = 2;
  Clusters clusters = 3;
  Routes routes = 4;
  Listeners listeners = 5;
  Runtimes runtimes = 6;
  Secrets secrets = 7;
}

service Adapter {
  rpc SetState(Snapshot) returns (Snapshot){}
}
